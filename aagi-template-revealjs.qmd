---
title: "AAGI"
author: "Analytics for the Australian Grains Industry"
date: last-modified
format:
  aagi-revealjs: default
---

```{r}
#| label: load
#| message: false

if (!require("pak")) install.packages("pak")

if (!require("AAGIPalettes")) {
  pak::pkg_install("AAGI-Org-AU-Public/AAGIPalettes")
}

if (!require("AAGIThemes")) {
  pak::pkg_install("AAGI-Org-AU-Public/AAGIThemes")
}

if (!require("gapminder")) {
  pak::pkg_install("gapminder")
}

library(ggplot2)
library(AAGIThemes)
library(flextable)

# set ggplot2 theme
theme_set(theme_aagi())

# set flextable theme
set_flextable_defaults(
  theme_fun = theme_ft_aagi
)
```

## An AAGI Reveal.js Theme for Quarto

This Quarto extension allows you to create your slides using a theme that follows AAGI typography and colour styles and provides the official AAGI logo and cover image for the title slide.

## Tables

When using this reveal.js theme, we suggest paring it with the R package {AAGIThemes} to provide AAGI themed tables, for example.

```{r}
#| label: AAGI table
#| message: false

library(dplyr)
library(gt)
library(AAGIThemes)

gt <- gt(head(airquality) |>
 mutate(`Month Name` = "May"))
gt <- theme_gt_aagi(gt)
gt
```


## Figures

{AAGIThemes} also provides support for theming graphic outputs in R, for example.

```{r}
#| label: figure
#| message: false
#Prepare data

library(gapminder)
library(dplyr)
library(ggplot2)
library(AAGIThemes)

facet <- gapminder |>
  filter(continent != "Americas") |>
  group_by(continent, year) |>
  summarise(pop = sum(as.numeric(pop)))
#> `summarise()` has grouped output by 'continent'. You can override using the
#> `.groups` argument.

col_values <- c(
  AAGIPalettes::colour_as_hex("AAGI Teal"),
  AAGIPalettes::colour_as_hex("AAGI Green"),
  AAGIPalettes::colour_as_hex("AAGI Yellow"),
  AAGIPalettes::colour_as_hex("AAGI Blue")
)

#Make plot
ggplot() +
  geom_area(data = facet, aes(x = year, y = pop, fill = continent)) +
  scale_fill_manual(values = col_values) +
  facet_wrap(~ continent, ncol = 5) +
  scale_y_continuous(breaks = c(0, 2000000000, 4000000000),
                    labels = c(0, "2bn", "4bn")) +
  theme_aagi() +
  geom_hline(yintercept = 0,
            linewidth = 1,
            colour = "#474747") +
  theme(legend.position = "none", axis.text.x = element_blank()) +
  labs(title = "Asia's rapid growth", subtitle = "Population growth by continent, 1952-2007")
```

## More Information

You can learn more about controlling the appearance of RevealJS output here: <https://quarto.org/docs/presentations/revealjs/>
